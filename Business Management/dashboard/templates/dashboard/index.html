{% extends 'base.html' %}

{% block content %}
<div class="row mb-4">
    <div class="col-12">
        <h2 class="fw-bold text-dark">Welcome back, Chief.</h2>
    </div>
</div>

<div class="row g-4 mb-5">
    <div class="col-md-4">
        <div class="sidebar-card p-4 shadow-sm text-center" style="border-top: 4px solid #6366f1;">
            <div class="text-success mb-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-box-seam" viewBox="0 0 16 16">
                    <path d="M8.186 1.113a.5.5 0 0 0-.372 0L1.846 3.5l2.404.961L10.404 2zm3.564 1.426L5.596 5 8 5.961 14.154 3.5zm3.25 1.7-6.5 2.6v7.922l6.5-2.6V4.24zM7.5 14.762V6.838L1 4.239v7.923zM7.443.184a1.5 1.5 0 0 1 1.114 0l7.129 2.852A.5.5 0 0 1 16 3.5v8.662a1 1 0 0 1-.629.928l-7.185 2.874a.5.5 0 0 1-.372 0L.63 13.09a1 1 0 0 1-.63-.928V3.5a.5.5 0 0 1 .314-.464z"/>
                </svg>
            </div>
            <h6 class="text-uppercase text-muted small fw-bold">Total Products</h6>
            <h3 class="fw-bold">{{ product_count }}</h3> </div>
    </div>
</div>

<div class="sidebar-card p-4 shadow-sm">
    <h5 class="fw-bold mb-4">Inventory Overview</h5>
    <div class="d-flex justify-content-between align-items-center mb-4">
    <a href="{% url 'add_product' %}" class="btn btn-primary btn-sm px-4 rounded-pill">+ Add Product</a>
</div>
    <table class="table table-hover">
    <thead class="table-light">
        <tr>
            <th>Product Name</th>
            <th>Price</th>
            <th>Stock</th>
            <th>Status</th>
            <th>Action</th> </tr>
    </thead>
    <tbody>
        {% for item in products %}
        <tr>
            <td><strong>{{ item.name }}</strong></td>
            <td>${{ item.price }}</td>
            <td>{{ item.stock_quantity }}</td>
            <td>
                {% if item.stock_quantity > 0 %}
                <span class="badge bg-success-subtle text-success">In Stock</span>
                {% else %}
                <span class="badge bg-danger-subtle text-danger">Out of Stock</span>
                {% endif %}
            </td>
            <td>
                <a href="{% url 'edit_product' item.pk %}" class="btn btn-sm btn-outline-primary">Edit</a>

                <a href="{% url 'delete_product' item.pk %}" class="btn btn-sm btn-outline-danger" onclick="return confirm('Are you sure?')">Delete</a>
            </td>

        </tr>
        {% empty %}
        <tr>
            <td colspan="5" class="text-center text-muted py-4">No products found. Add some in the admin!</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
</div>
{% endblock %}